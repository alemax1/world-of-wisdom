# World-of-Wisdom

## **Design and implement “Word of Wisdom” tcp server.**
 • TCP server should be protected from DDOS attacks with the Proof of Work (https://en.wikipedia.org/wiki/Proof_of_work), the challenge-response protocol should be used.
 • The choice of the POW algorithm should be explained.
 • After Proof Of Work verification, server should send one of the quotes from “word of wisdom” book or any other collection of the quotes.
 • Docker file should be provided both for the server and for the client that solves the POW challenge

## **Protocol description**

### 1. Send challenge to the client.

|Position   | Name              | size         | example         | description                                                                            |from        |
|:---------:|:------------------|:------------:|----------------:|:--------------------------------------------------------------------------------------:|-----------:|
|    1      | challengeSize     |len(challenge)| 16              |Size of generated challenge                                                             |server      |
|    2      | challenge         |configured    | qweasdzxcasdqwer|Array of randomly generated bytes                                                       |server      |
|    3      | difficulty        |uint(byte)    | 16              |The count of leading zeros in the hash sum is calculated by hashing (challenge + nonce) |server      |

### 2. Send nonce to the server.

|Position   | Name              | size         | example         | description                                                                              |from        |
|:---------:|:------------------|:------------:|----------------:|:----------------------------------------------------------------------------------------:|-----------:|
|    1      | nonce             |uint64        | 6435            |An integer, obtained through computation, to achieve the required number of leading zeros |client      |

### 3. Send quote to the client.

|Position   | Name              | size         | example                        | description                                          |from        |
|:---------:|:------------------|:------------:|-------------------------------:|:----------------------------------------------------:|-----------:|
|    1      | quote             |random        |{"text":"smth","author":"John"} |A quote will be sent upon successful nonce generation.|server      |

## **PoW algorithm description**

I chose the SHA-256 Hashcash algorithm for Proof of Work because of its simplicity and ease of implementation. While the algorithm requires significant computational power from the client, it is easy and inexpensive for the server to verify. Additionally, I considered other algorithms like Merkle trees and Guided Tour puzzles, but ultimately chose Hashcash due to its advantages in terms of implementation, validation, and the ability to dynamically adjust complexity.

## **Environment variables**

To pass time duration use aliases such as:
- m - for minutes
- s - for second
- h - for hours
- d - for days

| Name                     | type            | default         |
|:-------------------------|:---------------:|----------------:|
| SERVER_PORT              |uint16           | 9999            |
| SERVER_CONNECTION_TIMEOUT|time.Duration    | 5s              |
| SERVER_CONNECTIONS_LIMIT |int              | 10              |
| CHALLENGE_DIFFICULTY     |uint8            | 20              |
| CHALLENGE_SIZE           |uint32           | 64              |
| STORAGE_DATA_PATH        |string           | "./quotes.json" |
| SERVER_WORKERS_COUNT     |int              | 10              |


## **Running**

Makefile:
```bash
make run-server
make run-client --addr=localhost:9999
```

Docker-compose
```bash
docker-compose up
```